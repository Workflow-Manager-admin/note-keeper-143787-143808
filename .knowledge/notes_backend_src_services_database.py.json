{"is_source_file": true, "format": "Python", "description": "This file implements an in-memory database for note management with optional persistence to a JSON file. It provides CRUD operations and searching capabilities for notes, using data models NoteCreate, NoteUpdate, and NoteResponse.", "external_files": ["../models/note.py"], "external_methods": ["NoteCreate", "NoteUpdate", "NoteResponse"], "published": ["db"], "classes": [{"name": "InMemoryDatabase", "description": "A simple in-memory database class that supports loading/saving from a JSON file, and operations for creating, retrieving, updating, deleting, and searching notes."}], "methods": [{"name": "__init__(self, data_file: Optional[str] = None)", "description": "Initializes the database, optionally loading data from a specified file.", "scope": "InMemoryDatabase", "scopeKind": "class"}, {"name": "_load_from_file(self)", "description": "Loads the notes and next_id from a JSON file.", "scope": "InMemoryDatabase", "scopeKind": "class"}, {"name": "_save_to_file(self)", "description": "Saves the current notes and next_id to a JSON file.", "scope": "InMemoryDatabase", "scopeKind": "class"}, {"name": "NoteResponse create_note(self, note_data: NoteCreate)", "description": "Creates a new note with current timestamp and returns a NoteResponse.", "scope": "InMemoryDatabase", "scopeKind": "class"}, {"name": "Optional[NoteResponse] get_note(self, note_id: int)", "description": "Retrieves a note by ID.", "scope": "InMemoryDatabase", "scopeKind": "class"}, {"name": "tuple[List[NoteResponse],int] get_notes(self, skip: int = 0, limit: int = 100)", "description": "Retrieves a paginated list of notes, sorted by creation date descending.", "scope": "InMemoryDatabase", "scopeKind": "class"}, {"name": "Optional[NoteResponse] update_note(self, note_id: int, note_data: NoteUpdate)", "description": "Updates an existing note based on provided data.", "scope": "InMemoryDatabase", "scopeKind": "class"}, {"name": "bool delete_note(self, note_id: int)", "description": "Deletes a note by ID.", "scope": "InMemoryDatabase", "scopeKind": "class"}, {"name": "List[NoteResponse] search_notes(self, query: str)", "description": "Searches notes by a query string, matching title or content, returning sorted results.", "scope": "InMemoryDatabase", "scopeKind": "class"}], "calls": ["os.path.exists", "os.makedirs", "open", "json.load", "json.dump", "json.JSONDecodeError", "datetime.now", "NoteCreate.model_dump", "NoteResponse"], "search-terms": ["InMemoryDatabase", "notes", "JSON persistence", "CRUD notes", "search notes"], "state": 2, "file_id": 7, "knowledge_revision": 47, "git_revision": "", "revision_history": [{"16": ""}, {"43": ""}, {"47": ""}], "ctags": [{"_type": "tag", "name": "InMemoryDatabase", "path": "/home/kavia/workspace/code-generation/note-keeper-143787-143808/notes_backend/src/services/database.py", "pattern": "/^class InMemoryDatabase:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/note-keeper-143787-143808/notes_backend/src/services/database.py", "pattern": "/^    def __init__(self, data_file: Optional[str] = None):$/", "language": "Python", "kind": "member", "signature": "(self, data_file: Optional[str] = None)", "scope": "InMemoryDatabase", "scopeKind": "class"}, {"_type": "tag", "name": "_load_from_file", "path": "/home/kavia/workspace/code-generation/note-keeper-143787-143808/notes_backend/src/services/database.py", "pattern": "/^    def _load_from_file(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "InMemoryDatabase", "scopeKind": "class"}, {"_type": "tag", "name": "_save_to_file", "path": "/home/kavia/workspace/code-generation/note-keeper-143787-143808/notes_backend/src/services/database.py", "pattern": "/^    def _save_to_file(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "InMemoryDatabase", "scopeKind": "class"}, {"_type": "tag", "name": "create_note", "path": "/home/kavia/workspace/code-generation/note-keeper-143787-143808/notes_backend/src/services/database.py", "pattern": "/^    def create_note(self, note_data: NoteCreate) -> NoteResponse:$/", "language": "Python", "typeref": "typename:NoteResponse", "kind": "member", "signature": "(self, note_data: NoteCreate)", "scope": "InMemoryDatabase", "scopeKind": "class"}, {"_type": "tag", "name": "db", "path": "/home/kavia/workspace/code-generation/note-keeper-143787-143808/notes_backend/src/services/database.py", "pattern": "/^db = InMemoryDatabase()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "delete_note", "path": "/home/kavia/workspace/code-generation/note-keeper-143787-143808/notes_backend/src/services/database.py", "pattern": "/^    def delete_note(self, note_id: int) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self, note_id: int)", "scope": "InMemoryDatabase", "scopeKind": "class"}, {"_type": "tag", "name": "get_note", "path": "/home/kavia/workspace/code-generation/note-keeper-143787-143808/notes_backend/src/services/database.py", "pattern": "/^    def get_note(self, note_id: int) -> Optional[NoteResponse]:$/", "language": "Python", "typeref": "typename:Optional[NoteResponse]", "kind": "member", "signature": "(self, note_id: int)", "scope": "InMemoryDatabase", "scopeKind": "class"}, {"_type": "tag", "name": "get_notes", "path": "/home/kavia/workspace/code-generation/note-keeper-143787-143808/notes_backend/src/services/database.py", "pattern": "/^    def get_notes(self, skip: int = 0, limit: int = 100) -> tuple[List[NoteResponse], int]:$/", "language": "Python", "typeref": "typename:tuple[List[NoteResponse],int]", "kind": "member", "signature": "(self, skip: int = 0, limit: int = 100)", "scope": "InMemoryDatabase", "scopeKind": "class"}, {"_type": "tag", "name": "search_notes", "path": "/home/kavia/workspace/code-generation/note-keeper-143787-143808/notes_backend/src/services/database.py", "pattern": "/^    def search_notes(self, query: str) -> List[NoteResponse]:$/", "language": "Python", "typeref": "typename:List[NoteResponse]", "kind": "member", "signature": "(self, query: str)", "scope": "InMemoryDatabase", "scopeKind": "class"}, {"_type": "tag", "name": "update_note", "path": "/home/kavia/workspace/code-generation/note-keeper-143787-143808/notes_backend/src/services/database.py", "pattern": "/^    def update_note(self, note_id: int, note_data: NoteUpdate) -> Optional[NoteResponse]:$/", "language": "Python", "typeref": "typename:Optional[NoteResponse]", "kind": "member", "signature": "(self, note_id: int, note_data: NoteUpdate)", "scope": "InMemoryDatabase", "scopeKind": "class"}], "hash": "fa14bf43688e21124d2694670e34d9d0", "format-version": 4, "code-base-name": "notes_backend", "filename": "notes_backend/src/services/database.py", "fields": [{"name": "db = InMemoryDatabase()", "scope": "", "scopeKind": "", "description": "unavailable"}]}